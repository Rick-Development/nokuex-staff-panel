# Create new Laravel project
composer create-project laravel/laravel nokuex-staff-panel

cd nokuex-staff-panel

# Install nwidart/laravel-modules
composer require nwidart/laravel-modules

# Publish module config
php artisan vendor:publish --provider="Nwidart\Modules\LaravelModulesServiceProvider"

# Create Core module
php artisan module:make Core

# Create Chat module
php artisan module:make Chat

# Create directories for migrations
mkdir -p Modules/Core/Database/Migrations
mkdir -p Modules/Chat/Database/Migrations

# Create Core migrations
touch Modules/Core/Database/Migrations/2024_01_01_000001_create_roles_table.php
touch Modules/Core/Database/Migrations/2024_01_01_000002_create_permissions_table.php
touch Modules/Core/Database/Migrations/2024_01_01_000003_create_role_permission_table.php
touch Modules/Core/Database/Migrations/2024_01_01_000004_add_role_and_department_to_users_table.php
touch Modules/Core/Database/Migrations/2024_01_01_000005_create_audit_logs_table.php
touch Modules/Core/Database/Migrations/2024_01_01_000006_create_notifications_table.php

# Create Chat migrations
touch Modules/Chat/Database/Migrations/2024_01_01_000001_create_chat_channels_table.php
touch Modules/Chat/Database/Migrations/2024_01_01_000002_create_channel_members_table.php
touch Modules/Chat/Database/Migrations/2024_01_01_000003_create_chat_messages_table.php
touch Modules/Chat/Database/Migrations/2024_01_01_000004_create_message_statuses_table.php

# Create Core Models
mkdir -p Modules/Core/app/Models
touch Modules/Core/app/Models/Role.php
touch Modules/Core/app/Models/Permission.php
touch Modules/Core/app/Models/AuditLog.php

# Create Chat Models
mkdir -p Modules/Chat/app/Models
touch Modules/Chat/app/Models/ChatChannel.php
touch Modules/Chat/app/Models/ChannelMember.php
touch Modules/Chat/app/Models/ChatMessage.php
touch Modules/Chat/app/Models/MessageStatus.php

# Create Core Controllers
mkdir -p Modules/Core/app/Http/Controllers
touch Modules/Core/app/Http/Controllers/AuthController.php
touch Modules/Core/app/Http/Controllers/DashboardController.php
touch Modules/Core/app/Http/Controllers/UserController.php
touch Modules/Core/app/Http/Controllers/RoleController.php
touch Modules/Core/app/Http/Controllers/NotificationController.php

# Create Chat Controllers
mkdir -p Modules/Chat/app/Http/Controllers
touch Modules/Chat/app/Http/Controllers/ChatController.php
touch Modules/Chat/app/Http/Controllers/ChannelController.php

# Create Core Views directories
mkdir -p Modules/Core/resources/views/auth
mkdir -p Modules/Core/resources/views/dashboard
mkdir -p Modules/Core/resources/views/users
mkdir -p Modules/Core/resources/views/roles
mkdir -p Modules/Core/resources/views/notifications
mkdir -p Modules/Core/resources/views/layouts

# Create Core Views
touch Modules/Core/resources/views/layouts/app.blade.php
touch Modules/Core/resources/views/layouts/guest.blade.php
touch Modules/Core/resources/views/auth/login.blade.php
touch Modules/Core/resources/views/dashboard/index.blade.php
touch Modules/Core/resources/views/users/index.blade.php
touch Modules/Core/resources/views/users/create.blade.php
touch Modules/Core/resources/views/users/edit.blade.php
touch Modules/Core/resources/views/roles/index.blade.php
touch Modules/Core/resources/views/roles/create.blade.php
touch Modules/Core/resources/views/roles/edit.blade.php
touch Modules/Core/resources/views/notifications/index.blade.php

# Create Chat Views directories
mkdir -p Modules/Chat/resources/views
mkdir -p Modules/Chat/resources/views/channels

# Create Chat Views
touch Modules/Chat/resources/views/index.blade.php
touch Modules/Chat/resources/views/show.blade.php
touch Modules/Chat/resources/views/channels/create.blade.php

# Create public assets directory
mkdir -p public/css
touch public/css/app.css

# Create routes files (if not exist)
touch Modules/Core/routes/web.php
touch Modules/Chat/routes/web.php

# Run migrations
php artisan migrate

# Create storage link
php artisan storage:link

# Generate app key
php artisan key:generate

# Clear config cache
php artisan config:clear
php artisan cache:clear
php artisan view:clear
php artisan route:clear